#!/bin/sh
#
# This is a stub script that allows .apps to be relocatable on OSX but still
# find the managed assembly.
#
# You should never have to edit this file directly as its generated by the 
# bundle maker.
#

PWD=`pwd`

# Fetch the path relative to the launch point where this shell script exists.
APP_PATH=`echo $0 | awk '{split($0,patharr,"/"); idx=1; while(patharr[idx+3] != "") { if (patharr[idx] != "/") {printf("%s/", patharr[idx]); idx++ }} }'`

if [[ "$APP_PATH" -eq "" ]]
then
	APP_PATH="$PWD/../.."
fi

# Fetch the app name (its our own name)
ASSEMBLY=ExtractWizardGtk.exe
DIR=$(cd "$(dirname "$0")"; pwd)

cd "$APP_PATH/Contents/Resources"

if [ -f /Library/Frameworks/Mono.framework/Versions/Current/Commands/mono ]
then
        /Library/Frameworks/Mono.framework/Versions/Current/Commands/mono "$DIR/../Resources/$ASSEMBLY"
elif [ -f /usr/local/bin/mono ]
then
        /usr/local/bin/mono "$DIR/../Resources/$ASSEMBLY"
elif [ -f `which mono` ]
then
	mono "$DIR/../Resources/$ASSEMBLY"
else
	osascript -e 'tell app "Akeeba eXtract Wizard" to display dialog "Akeeba eXtract Wizard requires Mono to be installed. Please read the documentation at https://github.com/akeeba/nativexplatform/wiki/Requirements"'
fi
